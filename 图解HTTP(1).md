 # 图解HTTP(1)

[TOC]

### TCP/IP协议族

1. **应用层**

   决定了向用户提供应用服务时的通信活动

   + FTP、DNS、HTTP

2. **传输层**

   提供网络连接中的两台计算机之间的数据传输

   * TCP、UDP

3. **网络层**

   处理网络上流动的数据包

   * IP

4. 链路层

   用来处理连接网络的硬件部分

   * 网卡、光纤

> 使用TCP/IP协议族进行网络通信时，发送端从上往下走，接收端从下往上走
>
> 发送端每经过一层都会被打上一个该层所属的首部信息

---

### IP/TCP/DNS

1. **IP协议**

   作用是把各种数据包传送给对方，需要满足两个重要条件为``IP地址``和``MAC地址``

   * IP地址指明了节点被分配到的地址(可变)
   * MAC地址是指网卡所属的固定地址(不可变)

2. **TCP协议**

   作用是将大块的数据分割成以报文段为单位的数据包进行管理，并把数据**可靠的**传给对方

   * TCP三次握手

     | 发送端                  | 接收端                      |
     | ----------------------- | --------------------------- |
     | 发送标有SYN标志的数据包 |                             |
     |                         | 回传带有SYN/ACK标志的数据包 |
     | 发送标有ACK标志的数据包 |                             |

     > 中断则重复
     
   * TCP四次挥手

     | 发送端 | 接收端 |
     | ------ | ------ |
     |        | FIN    |
     | ACK    |        |
     | FIN    |        |
     |        | ACK    |

     

3. **DNS协议**

   提供域名到IP地址的解析服务

---

### HTTP

请求报文是由**请求方法**(GET、PUT...)、**请求URI**、**协议版本**、可选的请**求首部字段**和**内容实体**构成。

响应报文由**协议版本**、**状态码**、**解释短语**、**首部字段**、**实体主体**构成。

* HTTP协议不保存状态
* 持久连接keep-alive
  * 在没有明确提出断开连接时，保持TCP连接状态。
* 管线化，不用一个个响应
* cookie管理状态
  * 服务端响应报文中set-Cookie，客户端保存Cookie，下次请求时带上Cookie的值发送，以此来记录。