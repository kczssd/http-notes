## 图解HTTP(2)

### HTTP报文

---

1. 组成(请求报文，响应报文)
   1. 报文首部
      * 请求行----方法、URI、HTTP版本
      * 状态行----状态码、原因短语、HTTP版本
      * 首部字段----通用首部、请求首部、响应首部、实体首部
      * Cookie
   2. 空行
   3. 报文主体

### 内容编码

---

> HTTP在传输数据时，可以通过编码提升传输速度。编码后的报文主体称为**实体主体**

* gzip
* compress
* deflate
* identity(不进行编码)

1. 分块传输编码(将实体主体分块传输，以逐步显示)

#### HTTP采用了多部分对象集合(发送一份报文可含有多类型实体)

---

#### 获取部分内容的范围请求

---

> 使用Range字段来指定资源的byte范围
>
> 响应状态码为206(部分内容)
>
> 对于多重范围，标明首部字段Content-Type:multipart/byteranges

### 内容协商

---

> 是指客户端和服务器就响应的资源内容进行交涉，然后提供给客户最为适合的资源。
>
> 以**语言**、**字符集**、**编码方式**等作为判断响应的基准

1. **服务器驱动协商**

   > 以请求的首部字段为参考，服务端自动处理

2. **客户端驱动协商**

   > 用户从浏览器显示的可选项列表中手动选择，或利用Js自行根据**OS的类型**、**浏览器类型**选择

3. 透明协商



